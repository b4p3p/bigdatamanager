<script src="/public/js/showmapCtrl.js"></script>

<% include ../partials/leaflet.ejs %>

<script src="/public/lib/jquery-ui/jquery-ui.js"></script>

<link href="/public/lib/bootstrap-select/css/bootstrap-select.css" rel="stylesheet" type="text/css">
<script src="/public/lib/bootstrap-select/js/bootstrap-select.js"></script>
<script src="/public/lib/bootstrap-select/js/i18n/defaults-eu.js"></script>

<!-- jQDateRangeSlider -->


<style>

    #map{
        width: 105%;
    }
    #spinner{
        float: right;
    }
    #slider-container
    {
        position: relative;
        /*left: 25%;*/
        /*width: 50%;*/
        margin-top: 40px;
    }
    .row-map
    {
        padding-top: -40px;
        margin-top: -40px;
    }

    #indexContent
    {
        margin-top: 0;
        padding-top: 0;
    }
    .img-chk
    {
        width: 25px;
        height: 25px;
    }
    label
    {
        padding-top: 20px;
    }

</style>

<div class="row">
    <div id="slider-container">
        <div id="slider"></div>
    </div>
</div>

<div class="row">

    <label>Nations:</label>
    <select class="selectpicker" id="cmbNations"
            data-live-search="true" title="Loading..."
            multiple>
    </select>

    <label>Tags:</label>
    <select class="selectpicker" id="cmbTags" title="Loading..."
            data-live-search="true" multiple>
    </select>

    <script>
        $('.selectpicker').selectpicker();
    </script>

    <button type="button" class="btn btn-success"
            id="cmdFilter"
            style="float: right;margin-top: 13px"
            onclick="ShowmapCtrl.cmdFilter_click()">
        <span class="glyphicon glyphicon-filter" aria-hidden="true"></span>Apply filter</button>

</div>

<div class="row">

    <form class="form-inline form-map" id="form">

        <div class="checkbox">
            <img src="/public/img/icon-heatmap.png" class="img-chk">
            <label>
                <input type="checkbox" onclick="ShowmapCtrl.heatmap_click()"
                       id="chk_heatmap">
                Show Heatmap
            </label>
        </div>

        <div class="checkbox">
            <img src="/public/img/icon-marker-cluster.png" class="img-chk">
            <label>
                <input type="checkbox" onclick="ShowmapCtrl.markerCluster_click()"
                       id="chk_markerCluster">
                Show Cluster
                <i class="fa fa-spinner fa-spin hidden" id="spinner-cluster"
                   style="margin-top: 8px"></i>
            </label>
        </div>

        <div class="checkbox">
            <img src="/public/img/boundaries-ico.png" class="img-chk">
            <label>
                <input type="checkbox" onclick="ShowmapCtrl.showBoundaries_click()"
                       id="chk_boundaries">
                Show boundaries
            </label>
        </div>

        <div class="checkbox" style="float: right;padding-top: 20px">
            <i class="fa fa-spinner fa-spin" id="spinner"></i>
        </div>

    </form>

</div>

<div class="row row-map">
    <div id="map"></div>
</div>

<script>

    ShowmapCtrl.initMap('map');
    ShowmapCtrl.getData();
    ShowmapCtrl.initGui();

    //fix combo close
    $(document).on('mouseenter','#cmdFilter', function() {
        $(".btn-group").removeClass("open");
    });

</script>